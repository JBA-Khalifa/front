<div class="m-governance--proposal-detail">
  <div class="m-pageLayout__pane--main" m-pageLayout__pane="main">
    <div *ngIf="!inProgress">
      <a routerLink="/governance/latest">
        <i class="material-icons">arrow_back</i
        ><span i18n="@@COMMON__ACTIONS__BACK">See all proposals</span>
      </a>
      <div class="m-governance--proposal-detail-options-row">
        <div class="m-governance--proposal-detail-header">
          {{ proposal.title }}
        </div>
        <m-governance--proposal-detail-dropdown
          [allowDelete]="allowDelete"
          [proposal]="proposal"
        ></m-governance--proposal-detail-dropdown>
      </div>
      <div class="m-governance--state-row">
        <div class="m-governance--user-row">
          <div
            class="m-proposal--actions-active"
            *ngIf="proposal.state === 'active'"
          >
            Voting open
          </div>
          <div
            [ngClass]="{
              'm-proposal--actions-pending': proposal.state === 'pending',
              'm-proposal--actions-closed': proposal.state === 'closed'
            }"
            *ngIf="proposal.state !== 'active'"
          >
            {{ proposal.state }}
          </div>
          <div
            class="m-governance--user-row m-governance--proposal-detail-extra"
          >
            &nbsp;Â·&nbsp;Proposed by
            <div class="m-governance--user">&nbsp; @thatGuy</div>
          </div>
        </div>
        <div class="m-governance--user-row">
          <m-icon iconId="share"></m-icon>
          <div>Share proposal</div>
        </div>
      </div>
      <!-- Body -->
      <div
        class="m-governance--proposal-detail-body-title"
        [innerHTML]="proposal.body"
      ></div>
      <!-- End of body -->
    </div>
  </div>

  <div class="m-governance--proposal-detail-column">
    <m-loadingSpinner
      *ngIf="inProgress"
      [inProgress]="inProgress"
    ></m-loadingSpinner>
    <m-voting-card
      *ngIf="!inProgress"
      [proposal]="proposal"
      [space]="space"
      [votes]="votes$ | async"
    ></m-voting-card>

    <div class="m-governance--proposal-detail-info" *ngIf="!inProgress">
      <div
        class="
          m-governance--proposal-detail-row
          m-governance--proposal-detail-title
          m-governance--proposal-detail-pointer
        "
      >
        <span>Information</span>
        <!-- <m-icon iconId="open_in_new" m-tooltip--icon></m-icon> -->
      </div>

      <div class="m-governance--proposal-detail-row">
        <div class="m-governance--proposal-detail-extra">Proposed by</div>
        <div class="m-governance--proposal-detail-value">
          {{ truncatedOnchainAddress(proposal.author) }}
        </div>
      </div>

      <div class="m-governance--proposal-detail-row">
        <div class="m-governance--proposal-detail-extra">Published</div>
        <div class="m-governance--proposal-detail-value">
          {{ proposal.start }}
        </div>
      </div>

      <div class="m-governance--proposal-detail-row">
        <div class="m-governance--proposal-detail-extra">Voting closes</div>
        <div class="m-governance--proposal-detail-value">
          {{ proposal.end }}
        </div>
      </div>

      <div class="m-governance--proposal-detail-row">
        <div class="m-governance--proposal-detail-extra">Snapshot</div>
        <div
          class="m-governance--proposal-detail-value-snapshot"
          (click)="openSnapshot(proposal.id)"
        >
          #{{ proposal.snapshot }}
        </div>
      </div>
    </div>
  </div>
</div>
